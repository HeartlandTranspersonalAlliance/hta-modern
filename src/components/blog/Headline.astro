---
const { title = await Astro.slots.render('default'), subtitle = await Astro.slots.render('subtitle') } = Astro.props;

const condenseHeading = (value?: string) => {
  const trimmed = value?.trim();
  if (!trimmed) return trimmed;
  const words = trimmed
    .replace(/<[^>]+>/g, ' ')
    .trim()
    .split(/\s+/);
  return words.length > 3 ? words.slice(0, 3).join(' ') : trimmed;
};

const compactTitle = condenseHeading(typeof title === 'string' ? title : undefined);
---

<header class="mb-7 md:mb-9 text-center max-w-3xl mx-auto">
  <h1
    class="text-4xl md:text-5xl font-heading font-semibold leading-[1.04] tracking-[-0.02em]"
    set:html={compactTitle}
  />
  {subtitle && <div class="mt-3 mx-auto text-lg md:text-xl text-muted" set:html={subtitle} />}
</header>
